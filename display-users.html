<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>User Profiles</title>
  </head>
  <body>
    <h1>User Profiles</h1>
    <div id="userContainer"></div>

    <script>
      // 1. 使用Fetch API获取userProfiles.json文件
      fetch("userProfiles.json")
        .then((response) => {
          // 检查请求是否成功
          if (!response.ok) {
            throw new Error("Fetch error: " + response.status);
          }
          // 直接将响应转换为JSON对象（Fetch API内置JSON解析）
          return response.json();
        })
        .then((users) => {
          // 2. 获取页面容器，用于展示用户数据
          const container = document.getElementById("userContainer");

          // 3. 遍历每个用户，提取并展示所有字段
          users.forEach((user, index) => {
            // 创建HTML元素展示单个用户信息
            const userElement = document.createElement("div");
            userElement.innerHTML = `
        <h3>User ${index + 1}</h3>
        <p>Full Name: ${user.firstName} ${user.lastName}</p>
        <p>Email: ${user.email}</p>
        <p>Date of Birth: ${user.dateOfBirth}</p>
        <p>Address: ${user.address.street}, ${user.address.city}, ${
              user.address.state
            } ${user.address.zipCode}</p>
        <p>Preferences: 
          Theme - ${user.preferences.theme}, 
          Language - ${user.preferences.language}, 
          Notifications - ${user.preferences.notifications ? "On" : "Off"}, 
          Newsletter Subscription - ${
            user.preferences.subscription ? "Yes" : "No"
          }
        </p>
        <hr>
      `;
            // 将用户信息添加到页面容器中
            container.appendChild(userElement);
          });
        })
        .catch((err) => {
          // 捕获并打印错误（如文件路径错误、JSON格式错误）
          console.error("Fetch error: " + err.message);
        });
    </script>
  </body>
</html>
